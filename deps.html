<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>C Dependency Graph</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- vis-network from CDN (no install required) -->
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

  <style>
    :root {
      --bg: #0b0f19;
      --panel: #121a2a;
      --fg: #d6dbe6;
      --muted: #97a3b6;
      --border: #22304a;
      --chip: #1b2740;
      --chip2: #1a2f1f;
      --chip3: #2b2135;
      --chip4: #3a2a1a;
    }
    body {
      margin: 0; padding: 0;
      background: var(--bg); color: var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      height: 100vh; display: grid;
      grid-template-columns: 360px 1fr;
    }
    .sidebar {
      border-right: 1px solid var(--border);
      background: linear-gradient(180deg, #0c1322, #0b0f19);
      padding: 14px;
      overflow: auto;
    }
    .title { font-size: 16px; margin: 0 0 10px; }
    .sub { color: var(--muted); font-size: 12px; margin: 0 0 14px; }
    .row { display: flex; gap: 10px; align-items: center; margin: 10px 0; }
    input[type="text"] {
      width: 100%;
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--fg);
      padding: 10px 10px;
      border-radius: 10px;
      outline: none;
    }
    .btn {
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--fg);
      padding: 10px 10px;
      border-radius: 10px;
      cursor: pointer;
      user-select: none;
    }
    .btn:hover { filter: brightness(1.08); }
    .chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .chip {
      font-size: 12px; padding: 6px 10px;
      border-radius: 999px; border: 1px solid var(--border);
      background: var(--chip);
    }
    .chip.header { background: var(--chip2); }
    .chip.system { background: var(--chip3); }
    .chip.missing { background: var(--chip4); }
    .stats {
      margin-top: 12px;
      padding: 10px;
      border-radius: 12px;
      background: rgba(18,26,42,.6);
      border: 1px solid var(--border);
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }
    #network {
      width: 100%;
      height: 100vh;
      background: radial-gradient(1200px 700px at 30% 20%, rgba(61,108,255,.12), transparent 60%),
                  radial-gradient(900px 600px at 70% 70%, rgba(28,200,138,.10), transparent 60%),
                  var(--bg);
    }
    a { color: #8fb3ff; text-decoration: none; }
    .hint { margin-top: 10px; font-size: 12px; color: var(--muted); }
  </style>
</head>

<body>
  <div class="sidebar">
    <h1 class="title">C Dependency Graph</h1>
    <p class="sub">Mode: file include graph (#include &quot;...&quot;)</p>

    <div class="row">
      <input id="search" type="text" placeholder="Search node (file or function)..." />
    </div>
    <div class="row">
      <button class="btn" id="focusBtn">Focus</button>
      <button class="btn" id="resetBtn">Reset</button>
      <button class="btn" id="physicsBtn">Toggle Physics</button>
    </div>

    <div class="chips">
      <span class="chip">source</span>
      <span class="chip header">header</span>
      <span class="chip system">system</span>
      <span class="chip missing">missing</span>
      <span class="chip">function</span>
    </div>

    <div class="stats" id="stats"></div>

    <div class="hint">
      Tips:
      <ul>
        <li>Scroll to zoom; drag to pan</li>
        <li>Click a node to highlight its neighbors</li>
        <li>Search + Focus to jump to a node</li>
      </ul>
    </div>
  </div>

  <div id="network"></div>

<script>
  const NODES = [{"id": "game/ai_engine.cpp", "label": "game/ai_engine.cpp", "group": "source"}, {"id": "game/ai_engine.h", "label": "game/ai_engine.h", "group": "header"}, {"id": "src/uci.h", "label": "src/uci.h", "group": "header"}, {"id": "src/bitboard.h", "label": "src/bitboard.h", "group": "header"}, {"id": "src/position.h", "label": "src/position.h", "group": "header"}, {"id": "src/tune.h", "label": "src/tune.h", "group": "header"}, {"id": "game/gamelogic.c", "label": "game/gamelogic.c", "group": "source"}, {"id": "game/gamelogic.h", "label": "game/gamelogic.h", "group": "header"}, {"id": "game/piece.h", "label": "game/piece.h", "group": "header"}, {"id": "game/move.h", "label": "game/move.h", "group": "header"}, {"id": "game/types.h", "label": "game/types.h", "group": "header"}, {"id": "game/gamelogic_movegen.c", "label": "game/gamelogic_movegen.c", "group": "source"}, {"id": "game/gamelogic_safety.c", "label": "game/gamelogic_safety.c", "group": "source"}, {"id": "game/move.c", "label": "game/move.c", "group": "source"}, {"id": "game/piece.c", "label": "game/piece.c", "group": "source"}, {"id": "game/puzzles.c", "label": "game/puzzles.c", "group": "source"}, {"id": "game/puzzles.h", "label": "game/puzzles.h", "group": "header"}, {"id": "game/test_suite.c", "label": "game/test_suite.c", "group": "source"}, {"id": "gui/ai_controller.c", "label": "gui/ai_controller.c", "group": "source"}, {"id": "gui/ai_controller.h", "label": "gui/ai_controller.h", "group": "header"}, {"id": "gui/config_manager.h", "label": "gui/config_manager.h", "group": "header"}, {"id": "gui/ai_dialog.h", "label": "gui/ai_dialog.h", "group": "header"}, {"id": "gui/ai_dialog.c", "label": "gui/ai_dialog.c", "group": "source"}, {"id": "gui/gui_utils.h", "label": "gui/gui_utils.h", "group": "header"}, {"id": "gui/app_state.h", "label": "gui/app_state.h", "group": "header"}, {"id": "gui/info_panel.h", "label": "gui/info_panel.h", "group": "header"}, {"id": "gui/board_theme_dialog.h", "label": "gui/board_theme_dialog.h", "group": "header"}, {"id": "gui/piece_theme_dialog.h", "label": "gui/piece_theme_dialog.h", "group": "header"}, {"id": "gui/app_theme.h", "label": "gui/app_theme.h", "group": "header"}, {"id": "gui/app_theme_dialog.c", "label": "gui/app_theme_dialog.c", "group": "source"}, {"id": "gui/app_theme_dialog.h", "label": "gui/app_theme_dialog.h", "group": "header"}, {"id": "gui/theme_manager.h", "label": "gui/theme_manager.h", "group": "header"}, {"id": "gui/board_theme_dialog.c", "label": "gui/board_theme_dialog.c", "group": "source"}, {"id": "gui/theme_data.h", "label": "gui/theme_data.h", "group": "header"}, {"id": "gui/board_widget.c", "label": "gui/board_widget.c", "group": "source"}, {"id": "gui/board_widget.h", "label": "gui/board_widget.h", "group": "header"}, {"id": "gui/sound_engine.h", "label": "gui/sound_engine.h", "group": "header"}, {"id": "gui/promotion_dialog.h", "label": "gui/promotion_dialog.h", "group": "header"}, {"id": "gui/config_manager.c", "label": "gui/config_manager.c", "group": "source"}, {"id": "gui/dark_mode_button.c", "label": "gui/dark_mode_button.c", "group": "source"}, {"id": "gui/dark_mode_button.h", "label": "gui/dark_mode_button.h", "group": "header"}, {"id": "gui/gui_utils.c", "label": "gui/gui_utils.c", "group": "source"}, {"id": "gui/info_panel.c", "label": "gui/info_panel.c", "group": "source"}, {"id": "gui/main.c", "label": "gui/main.c", "group": "source"}, {"id": "gui/settings_dialog.h", "label": "gui/settings_dialog.h", "group": "header"}, {"id": "\"types.h\"", "label": "\"types.h\"", "group": "missing"}, {"id": "gui/tutorial.h", "label": "gui/tutorial.h", "group": "header"}, {"id": "gui/right_side_panel.h", "label": "gui/right_side_panel.h", "group": "header"}, {"id": "gui/puzzle_controller.h", "label": "gui/puzzle_controller.h", "group": "header"}, {"id": "gui/miniaudio.h", "label": "gui/miniaudio.h", "group": "header"}, {"id": "gui/piece_theme_dialog.c", "label": "gui/piece_theme_dialog.c", "group": "source"}, {"id": "gui/promotion_dialog.c", "label": "gui/promotion_dialog.c", "group": "source"}, {"id": "gui/puzzle_controller.c", "label": "gui/puzzle_controller.c", "group": "source"}, {"id": "gui/puzzle_editor.c", "label": "gui/puzzle_editor.c", "group": "source"}, {"id": "gui/puzzle_editor.h", "label": "gui/puzzle_editor.h", "group": "header"}, {"id": "gui/right_side_panel.c", "label": "gui/right_side_panel.c", "group": "source"}, {"id": "gui/settings_dialog.c", "label": "gui/settings_dialog.c", "group": "source"}, {"id": "gui/sound_engine.c", "label": "gui/sound_engine.c", "group": "source"}, {"id": "gui/theme_data.c", "label": "gui/theme_data.c", "group": "source"}, {"id": "gui/theme_manager.c", "label": "gui/theme_manager.c", "group": "source"}, {"id": "gui/tutorial.c", "label": "gui/tutorial.c", "group": "source"}, {"id": "src/benchmark.cpp", "label": "src/benchmark.cpp", "group": "source"}, {"id": "src/benchmark.h", "label": "src/benchmark.h", "group": "header"}, {"id": "src/numa.h", "label": "src/numa.h", "group": "header"}, {"id": "src/bitboard.cpp", "label": "src/bitboard.cpp", "group": "source"}, {"id": "src/misc.h", "label": "src/misc.h", "group": "header"}, {"id": "src/types.h", "label": "src/types.h", "group": "header"}, {"id": "src/engine.cpp", "label": "src/engine.cpp", "group": "source"}, {"id": "src/engine.h", "label": "src/engine.h", "group": "header"}, {"id": "src/evaluate.h", "label": "src/evaluate.h", "group": "header"}, {"id": "src/nnue/network.h", "label": "src/nnue/network.h", "group": "header"}, {"id": "src/nnue/nnue_common.h", "label": "src/nnue/nnue_common.h", "group": "header"}, {"id": "src/perft.h", "label": "src/perft.h", "group": "header"}, {"id": "src/search.h", "label": "src/search.h", "group": "header"}, {"id": "src/syzygy/tbprobe.h", "label": "src/syzygy/tbprobe.h", "group": "header"}, {"id": "src/ucioption.h", "label": "src/ucioption.h", "group": "header"}, {"id": "src/thread.h", "label": "src/thread.h", "group": "header"}, {"id": "src/tt.h", "label": "src/tt.h", "group": "header"}, {"id": "src/evaluate.cpp", "label": "src/evaluate.cpp", "group": "source"}, {"id": "src/nnue/nnue_misc.h", "label": "src/nnue/nnue_misc.h", "group": "header"}, {"id": "src/nnue/nnue_accumulator.h", "label": "src/nnue/nnue_accumulator.h", "group": "header"}, {"id": "src/history.h", "label": "src/history.h", "group": "header"}, {"id": "src/incbin.h", "label": "src/incbin.h", "group": "header"}, {"id": "\"TargetConditionals.h\"", "label": "\"TargetConditionals.h\"", "group": "missing"}, {"id": "src/main.cpp", "label": "src/main.cpp", "group": "source"}, {"id": "src/memory.cpp", "label": "src/memory.cpp", "group": "source"}, {"id": "src/memory.h", "label": "src/memory.h", "group": "header"}, {"id": "src/misc.cpp", "label": "src/misc.cpp", "group": "source"}, {"id": "src/movegen.cpp", "label": "src/movegen.cpp", "group": "source"}, {"id": "src/movegen.h", "label": "src/movegen.h", "group": "header"}, {"id": "src/movepick.cpp", "label": "src/movepick.cpp", "group": "source"}, {"id": "src/movepick.h", "label": "src/movepick.h", "group": "header"}, {"id": "src/position.cpp", "label": "src/position.cpp", "group": "source"}, {"id": "src/score.cpp", "label": "src/score.cpp", "group": "source"}, {"id": "src/score.h", "label": "src/score.h", "group": "header"}, {"id": "src/search.cpp", "label": "src/search.cpp", "group": "source"}, {"id": "src/timeman.h", "label": "src/timeman.h", "group": "header"}, {"id": "src/thread.cpp", "label": "src/thread.cpp", "group": "source"}, {"id": "src/thread_win32_osx.h", "label": "src/thread_win32_osx.h", "group": "header"}, {"id": "src/timeman.cpp", "label": "src/timeman.cpp", "group": "source"}, {"id": "src/tt.cpp", "label": "src/tt.cpp", "group": "source"}, {"id": "src/tune.cpp", "label": "src/tune.cpp", "group": "source"}, {"id": "src/uci.cpp", "label": "src/uci.cpp", "group": "source"}, {"id": "src/ucioption.cpp", "label": "src/ucioption.cpp", "group": "source"}, {"id": "src/incbin/incbin.h", "label": "src/incbin/incbin.h", "group": "header"}, {"id": "src/nnue/network.cpp", "label": "src/nnue/network.cpp", "group": "source"}, {"id": "src/nnue/nnue_architecture.h", "label": "src/nnue/nnue_architecture.h", "group": "header"}, {"id": "src/nnue/nnue_feature_transformer.h", "label": "src/nnue/nnue_feature_transformer.h", "group": "header"}, {"id": "src/nnue/nnue_accumulator.cpp", "label": "src/nnue/nnue_accumulator.cpp", "group": "source"}, {"id": "src/nnue/features/half_ka_v2_hm.h", "label": "src/nnue/features/half_ka_v2_hm.h", "group": "header"}, {"id": "src/nnue/layers/affine_transform.h", "label": "src/nnue/layers/affine_transform.h", "group": "header"}, {"id": "src/nnue/layers/affine_transform_sparse_input.h", "label": "src/nnue/layers/affine_transform_sparse_input.h", "group": "header"}, {"id": "src/nnue/layers/clipped_relu.h", "label": "src/nnue/layers/clipped_relu.h", "group": "header"}, {"id": "src/nnue/layers/sqr_clipped_relu.h", "label": "src/nnue/layers/sqr_clipped_relu.h", "group": "header"}, {"id": "src/nnue/nnue_misc.cpp", "label": "src/nnue/nnue_misc.cpp", "group": "source"}, {"id": "src/syzygy/tbprobe.cpp", "label": "src/syzygy/tbprobe.cpp", "group": "source"}, {"id": "src/nnue/features/half_ka_v2_hm.cpp", "label": "src/nnue/features/half_ka_v2_hm.cpp", "group": "source"}, {"id": "src/nnue/layers/simd.h", "label": "src/nnue/layers/simd.h", "group": "header"}];
  const EDGES = [{"from": "game/ai_engine.cpp", "to": "game/ai_engine.h", "arrows": "to"}, {"from": "game/ai_engine.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "game/ai_engine.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "game/ai_engine.cpp", "to": "src/tune.h", "arrows": "to"}, {"from": "game/ai_engine.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "game/gamelogic.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "game/gamelogic.c", "to": "game/move.h", "arrows": "to"}, {"from": "game/gamelogic.c", "to": "game/piece.h", "arrows": "to"}, {"from": "game/gamelogic.h", "to": "game/types.h", "arrows": "to"}, {"from": "game/gamelogic_movegen.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "game/gamelogic_movegen.c", "to": "game/move.h", "arrows": "to"}, {"from": "game/gamelogic_safety.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "game/gamelogic_safety.c", "to": "game/move.h", "arrows": "to"}, {"from": "game/move.c", "to": "game/move.h", "arrows": "to"}, {"from": "game/move.c", "to": "game/piece.h", "arrows": "to"}, {"from": "game/move.c", "to": "game/types.h", "arrows": "to"}, {"from": "game/move.h", "to": "game/types.h", "arrows": "to"}, {"from": "game/piece.c", "to": "game/piece.h", "arrows": "to"}, {"from": "game/piece.h", "to": "game/types.h", "arrows": "to"}, {"from": "game/puzzles.c", "to": "game/puzzles.h", "arrows": "to"}, {"from": "game/puzzles.h", "to": "game/types.h", "arrows": "to"}, {"from": "game/test_suite.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "game/test_suite.c", "to": "game/move.h", "arrows": "to"}, {"from": "game/test_suite.c", "to": "game/piece.h", "arrows": "to"}, {"from": "gui/ai_controller.c", "to": "game/move.h", "arrows": "to"}, {"from": "gui/ai_controller.c", "to": "gui/ai_controller.h", "arrows": "to"}, {"from": "gui/ai_controller.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/ai_controller.h", "to": "game/ai_engine.h", "arrows": "to"}, {"from": "gui/ai_controller.h", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/ai_controller.h", "to": "gui/ai_dialog.h", "arrows": "to"}, {"from": "gui/ai_controller.h", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/ai_dialog.c", "to": "game/ai_engine.h", "arrows": "to"}, {"from": "gui/ai_dialog.c", "to": "gui/ai_dialog.h", "arrows": "to"}, {"from": "gui/ai_dialog.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/ai_dialog.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/app_state.h", "to": "gui/ai_dialog.h", "arrows": "to"}, {"from": "gui/app_state.h", "to": "gui/board_theme_dialog.h", "arrows": "to"}, {"from": "gui/app_state.h", "to": "gui/info_panel.h", "arrows": "to"}, {"from": "gui/app_state.h", "to": "gui/piece_theme_dialog.h", "arrows": "to"}, {"from": "gui/app_theme_dialog.c", "to": "gui/app_theme.h", "arrows": "to"}, {"from": "gui/app_theme_dialog.c", "to": "gui/app_theme_dialog.h", "arrows": "to"}, {"from": "gui/app_theme_dialog.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/app_theme_dialog.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/app_theme_dialog.c", "to": "gui/theme_manager.h", "arrows": "to"}, {"from": "gui/board_theme_dialog.c", "to": "gui/board_theme_dialog.h", "arrows": "to"}, {"from": "gui/board_theme_dialog.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/board_theme_dialog.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/board_theme_dialog.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "game/move.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "game/types.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "gui/promotion_dialog.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/board_widget.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/board_widget.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/config_manager.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/config_manager.c", "to": "gui/theme_manager.h", "arrows": "to"}, {"from": "gui/config_manager.h", "to": "gui/app_theme.h", "arrows": "to"}, {"from": "gui/dark_mode_button.c", "to": "gui/dark_mode_button.h", "arrows": "to"}, {"from": "gui/dark_mode_button.c", "to": "gui/theme_manager.h", "arrows": "to"}, {"from": "gui/gui_utils.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/info_panel.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/info_panel.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/info_panel.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/info_panel.c", "to": "gui/info_panel.h", "arrows": "to"}, {"from": "gui/info_panel.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/info_panel.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/main.c", "to": "\"types.h\"", "arrows": "to"}, {"from": "gui/main.c", "to": "game/ai_engine.h", "arrows": "to"}, {"from": "gui/main.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/main.c", "to": "game/puzzles.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/ai_controller.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/ai_dialog.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/app_state.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/board_theme_dialog.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/dark_mode_button.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/info_panel.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/piece_theme_dialog.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/puzzle_controller.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/right_side_panel.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/settings_dialog.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/theme_manager.h", "arrows": "to"}, {"from": "gui/main.c", "to": "gui/tutorial.h", "arrows": "to"}, {"from": "gui/piece_theme_dialog.c", "to": "game/types.h", "arrows": "to"}, {"from": "gui/piece_theme_dialog.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/piece_theme_dialog.c", "to": "gui/piece_theme_dialog.h", "arrows": "to"}, {"from": "gui/piece_theme_dialog.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/piece_theme_dialog.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/promotion_dialog.c", "to": "game/types.h", "arrows": "to"}, {"from": "gui/promotion_dialog.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/promotion_dialog.c", "to": "gui/promotion_dialog.h", "arrows": "to"}, {"from": "gui/promotion_dialog.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/promotion_dialog.h", "to": "game/types.h", "arrows": "to"}, {"from": "gui/promotion_dialog.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "game/puzzles.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "gui/info_panel.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "gui/puzzle_controller.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "gui/settings_dialog.h", "arrows": "to"}, {"from": "gui/puzzle_controller.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/puzzle_controller.h", "to": "gui/app_state.h", "arrows": "to"}, {"from": "gui/puzzle_editor.c", "to": "game/puzzles.h", "arrows": "to"}, {"from": "gui/puzzle_editor.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/puzzle_editor.c", "to": "gui/puzzle_editor.h", "arrows": "to"}, {"from": "gui/right_side_panel.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/right_side_panel.c", "to": "gui/right_side_panel.h", "arrows": "to"}, {"from": "gui/right_side_panel.h", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/right_side_panel.h", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "game/puzzles.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/ai_dialog.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/app_state.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/app_theme_dialog.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/board_theme_dialog.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/gui_utils.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/piece_theme_dialog.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/puzzle_editor.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/settings_dialog.h", "arrows": "to"}, {"from": "gui/settings_dialog.c", "to": "gui/tutorial.h", "arrows": "to"}, {"from": "gui/settings_dialog.h", "to": "gui/app_state.h", "arrows": "to"}, {"from": "gui/sound_engine.c", "to": "gui/miniaudio.h", "arrows": "to"}, {"from": "gui/sound_engine.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/theme_data.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/theme_data.c", "to": "gui/theme_data.h", "arrows": "to"}, {"from": "gui/theme_data.h", "to": "game/types.h", "arrows": "to"}, {"from": "gui/theme_manager.c", "to": "gui/config_manager.h", "arrows": "to"}, {"from": "gui/theme_manager.c", "to": "gui/theme_manager.h", "arrows": "to"}, {"from": "gui/theme_manager.h", "to": "gui/app_theme.h", "arrows": "to"}, {"from": "gui/tutorial.c", "to": "game/gamelogic.h", "arrows": "to"}, {"from": "gui/tutorial.c", "to": "game/piece.h", "arrows": "to"}, {"from": "gui/tutorial.c", "to": "gui/board_widget.h", "arrows": "to"}, {"from": "gui/tutorial.c", "to": "gui/sound_engine.h", "arrows": "to"}, {"from": "gui/tutorial.c", "to": "gui/tutorial.h", "arrows": "to"}, {"from": "gui/tutorial.h", "to": "gui/app_state.h", "arrows": "to"}, {"from": "src/benchmark.cpp", "to": "src/benchmark.h", "arrows": "to"}, {"from": "src/benchmark.cpp", "to": "src/numa.h", "arrows": "to"}, {"from": "src/bitboard.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/bitboard.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/bitboard.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/engine.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/evaluate.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/numa.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/perft.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/engine.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/numa.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/search.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/thread.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/tt.h", "arrows": "to"}, {"from": "src/engine.h", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/evaluate.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/nnue/nnue_misc.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/evaluate.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/evaluate.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/history.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/history.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/incbin.h", "to": "\"TargetConditionals.h\"", "arrows": "to"}, {"from": "src/incbin/incbin.h", "to": "\"TargetConditionals.h\"", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/tune.h", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/main.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/memory.cpp", "to": "src/memory.h", "arrows": "to"}, {"from": "src/memory.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/misc.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/misc.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/movegen.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/movegen.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/movegen.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/movegen.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/movepick.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/movepick.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/movepick.cpp", "to": "src/movepick.h", "arrows": "to"}, {"from": "src/movepick.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/movepick.h", "to": "src/history.h", "arrows": "to"}, {"from": "src/movepick.h", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/movepick.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.cpp", "to": "src/nnue/features/half_ka_v2_hm.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.cpp", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/features/half_ka_v2_hm.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform.h", "to": "src/nnue/layers/simd.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform_sparse_input.h", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform_sparse_input.h", "to": "src/nnue/layers/affine_transform.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform_sparse_input.h", "to": "src/nnue/layers/simd.h", "arrows": "to"}, {"from": "src/nnue/layers/affine_transform_sparse_input.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/layers/clipped_relu.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/layers/sqr_clipped_relu.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/evaluate.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/incbin/incbin.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/memory.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/nnue/nnue_misc.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/nnue/network.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/memory.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/nnue/nnue_feature_transformer.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/nnue/nnue_misc.h", "arrows": "to"}, {"from": "src/nnue/network.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/nnue/nnue_feature_transformer.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.h", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/nnue_accumulator.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/features/half_ka_v2_hm.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/layers/affine_transform.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/layers/affine_transform_sparse_input.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/layers/clipped_relu.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/layers/sqr_clipped_relu.h", "arrows": "to"}, {"from": "src/nnue/nnue_architecture.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/nnue_common.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/nnue/nnue_feature_transformer.h", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/nnue/nnue_feature_transformer.h", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/nnue_feature_transformer.h", "to": "src/nnue/nnue_common.h", "arrows": "to"}, {"from": "src/nnue/nnue_feature_transformer.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/nnue/nnue_feature_transformer.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/nnue/nnue_misc.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.h", "to": "src/nnue/nnue_architecture.h", "arrows": "to"}, {"from": "src/nnue/nnue_misc.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/numa.h", "to": "src/memory.h", "arrows": "to"}, {"from": "src/numa.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/perft.h", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/perft.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/perft.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/perft.h", "to": "src/uci.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/tt.h", "arrows": "to"}, {"from": "src/position.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/position.h", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/position.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/score.cpp", "to": "src/score.h", "arrows": "to"}, {"from": "src/score.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/score.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/evaluate.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/history.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/movepick.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/thread.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/timeman.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/tt.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/search.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/history.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/nnue/network.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/nnue/nnue_accumulator.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/numa.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/score.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/timeman.h", "arrows": "to"}, {"from": "src/search.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/bitboard.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/syzygy/tbprobe.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/thread.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/timeman.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/thread.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/thread.h", "to": "src/numa.h", "arrows": "to"}, {"from": "src/thread.h", "to": "src/position.h", "arrows": "to"}, {"from": "src/thread.h", "to": "src/search.h", "arrows": "to"}, {"from": "src/thread.h", "to": "src/thread_win32_osx.h", "arrows": "to"}, {"from": "src/timeman.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/timeman.cpp", "to": "src/timeman.h", "arrows": "to"}, {"from": "src/timeman.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/timeman.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/timeman.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/tt.cpp", "to": "src/memory.h", "arrows": "to"}, {"from": "src/tt.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/tt.cpp", "to": "src/syzygy/tbprobe.h", "arrows": "to"}, {"from": "src/tt.cpp", "to": "src/thread.h", "arrows": "to"}, {"from": "src/tt.cpp", "to": "src/tt.h", "arrows": "to"}, {"from": "src/tt.h", "to": "src/memory.h", "arrows": "to"}, {"from": "src/tt.h", "to": "src/types.h", "arrows": "to"}, {"from": "src/tune.cpp", "to": "src/tune.h", "arrows": "to"}, {"from": "src/tune.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/types.h", "to": "src/tune.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/benchmark.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/engine.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/memory.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/movegen.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/position.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/score.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/search.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/types.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/uci.h", "arrows": "to"}, {"from": "src/uci.cpp", "to": "src/ucioption.h", "arrows": "to"}, {"from": "src/uci.h", "to": "src/engine.h", "arrows": "to"}, {"from": "src/uci.h", "to": "src/misc.h", "arrows": "to"}, {"from": "src/uci.h", "to": "src/search.h", "arrows": "to"}, {"from": "src/ucioption.cpp", "to": "src/misc.h", "arrows": "to"}, {"from": "src/ucioption.cpp", "to": "src/ucioption.h", "arrows": "to"}];

  const groupStyles = {
    source:  { shape: "box",   color: { background: "#20314f", border: "#385a98" }, font: { color: "#d6dbe6" } },
    header:  { shape: "box",   color: { background: "#1f3b2a", border: "#2f8d58" }, font: { color: "#d6dbe6" } },
    system:  { shape: "ellipse", color: { background: "#2a1d3d", border: "#7a4fd6" }, font: { color: "#d6dbe6" } },
    missing: { shape: "ellipse", color: { background: "#3a2a1a", border: "#d58b3a" }, font: { color: "#d6dbe6" } },
    function:{ shape: "dot", size: 10, color: { background: "#27324a", border: "#7aa2ff" }, font: { color: "#d6dbe6" } }
  };

  const nodes = new vis.DataSet(NODES.map(n => ({...n, ...(groupStyles[n.group] || {}) })));
  const edges = new vis.DataSet(EDGES.map(e => ({
    ...e,
    color: { color: "rgba(160,180,220,.55)" },
    arrows: { to: { enabled: true, scaleFactor: 0.7 } },
    smooth: { enabled: true, type: "dynamic" }
  })));

  const container = document.getElementById("network");
  const data = { nodes, edges };

  const options = {
    physics: {
      enabled: true,
      stabilization: { iterations: 120 },
      barnesHut: { gravitationalConstant: -7000, springLength: 140, springConstant: 0.02 }
    },
    interaction: { hover: true, multiselect: true },
    nodes: { borderWidth: 1.2 },
  };

  const network = new vis.Network(container, data, options);

  const statsEl = document.getElementById("stats");
  statsEl.textContent = `Nodes: ${nodes.length}  |  Edges: ${edges.length}`;

  network.on("click", function(params) {
    if (!params.nodes.length) {
      nodes.forEach(n => nodes.update({id: n.id, opacity: 1.0}));
      edges.forEach(e => edges.update({id: e.id, opacity: 1.0}));
      return;
    }
    const selected = params.nodes[0];
    const neighbors = new Set(network.getConnectedNodes(selected));
    neighbors.add(selected);

    nodes.forEach(n => nodes.update({id: n.id, opacity: neighbors.has(n.id) ? 1.0 : 0.15}));
    edges.forEach(e => {
      const keep = neighbors.has(e.from) && neighbors.has(e.to);
      edges.update({id: e.id, opacity: keep ? 1.0 : 0.08});
    });
  });

  function findNodeId(q) {
    q = (q || "").trim().toLowerCase();
    if (!q) return null;

    let hit = nodes.get().find(n => (n.id || "").toLowerCase() === q);
    if (hit) return hit.id;

    hit = nodes.get().find(n => (n.label || "").toLowerCase().includes(q));
    return hit ? hit.id : null;
  }

  document.getElementById("focusBtn").onclick = () => {
    const q = document.getElementById("search").value;
    const id = findNodeId(q);
    if (!id) return;
    network.selectNodes([id]);
    network.focus(id, { scale: 1.4, animation: { duration: 600 } });
  };

  document.getElementById("resetBtn").onclick = () => {
    network.setData({nodes, edges});
    network.fit({ animation: { duration: 500 } });
    nodes.forEach(n => nodes.update({id: n.id, opacity: 1.0}));
    edges.forEach(e => edges.update({id: e.id, opacity: 1.0}));
  };

  let physicsOn = true;
  document.getElementById("physicsBtn").onclick = () => {
    physicsOn = !physicsOn;
    network.setOptions({ physics: { enabled: physicsOn }});
  };
</script>
</body>
</html>
